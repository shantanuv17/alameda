// This file has messages related to predictions of containers, pods, and nodes

syntax = "proto3";

package prophetstor.api.datahub.predictions;

import "prophetstor/api/datahub/common/metrics.proto";
import "prophetstor/api/datahub/common/types.proto";
import "prophetstor/api/datahub/common/rawdata.proto";
import "prophetstor/api/datahub/schemas/types.proto";
import "google/protobuf/timestamp.proto";

option go_package = "prophetstor.com/api/datahub/predictions";

/**
 * Represents a data point of time-series metric data
 */
message Sample {
    google.protobuf.Timestamp time          = 1;
    google.protobuf.Timestamp end_time      = 2;
    string                    model_id      = 3;
    string                    prediction_id = 4;
    string                    num_value     = 5;
}

/**
 * Represents a piece of metreic data
 */
message MetricData {
    common.MetricType metric_type = 1;
    repeated Sample   data        = 2; // data can be time series or non-time series
    int64             granularity = 3;
}

message Prediction {
    schemas.SchemaMeta      schema_meta     = 1;
    repeated PredictionData prediction_data = 2;
}

message PredictionData {
    common.MetricType       metric_type       = 1;
    common.ResourceBoundary resource_boundary = 2;
    common.ReadData         read_data         = 3;
}
